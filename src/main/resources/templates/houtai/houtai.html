<!DOCTYPE html>
<html lang="zh-CN" ng-app="app">
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>漫集结后台管理</title>
  <!--  <link href="//cdn.bootcss.com/video.js/7.0.0-alpha.1/alt/video-js-cdn.css" rel="stylesheet">-->
    <link href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/static/css/houtai/common.css"/>
    <link rel="stylesheet" type="text/css" href="/static/css/houtai/slide.css"/>
    <link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="/static/css/houtai/flat-ui.min.css"/>
    <link rel="stylesheet" type="text/css" href="/static/css/houtai/jquery.nouislider.css">
    <script src="/static/js/angular.js"></script>
   <!-- <script src="//cdn.bootcss.com/video.js/7.0.0-alpha.1//video.min.js"></script>-->
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script>
        $(function () {
            $(".meun-item").click(function () {
                $(".meun-item").removeClass("meun-item-active");
                $(this).addClass("meun-item-active");
                var itmeObj = $(".meun-item").find("img");
                itmeObj.each(function () {
                    var items = $(this).attr("src");
                    items = items.replace("_grey.png", ".png");
                    items = items.replace(".png", "_grey.png")
                    $(this).attr("src", items);
                });
                var attrObj = $(this).find("img").attr("src");
                ;
                attrObj = attrObj.replace("_grey.png", ".png");
                $(this).find("img").attr("src", attrObj);
            });
            $("#topAD").click(function () {
                $("#topA").toggleClass(" glyphicon-triangle-right");
                $("#topA").toggleClass(" glyphicon-triangle-bottom");
            });
            $("#topBD").click(function () {
                $("#topB").toggleClass(" glyphicon-triangle-right");
                $("#topB").toggleClass(" glyphicon-triangle-bottom");
            });
            $("#topCD").click(function () {
                $("#topC").toggleClass(" glyphicon-triangle-right");
                $("#topC").toggleClass(" glyphicon-triangle-bottom");
            });
            $(".toggle-btn").click(function () {
                $("#leftMeun").toggleClass("show");
                $("#rightContent").toggleClass("pd0px");
            })
        })
    </script>
    <![endif]-->

</head>

<body ng-controller="mainController">
<div id="wrap">
    <!-- 左侧菜单栏目块 -->
    <div class="leftMeun" id="leftMeun">
        <div id="logoDiv">
            <p id="logoP"><!--<img  src="/static/css/logo.png" style="width: 50px;height: 45px">--><span>漫集结后台管理</span>
            </p>
        </div>
        <div id="personInfor">
           管理员：[[${session.loginUser.username}]]
            <a href="" th:href="@{/user/logout}">退出登录</a>
        </div>
        <div class="meun-title">账号管理</div>

        <div class="meun-item" ng-click="getAdmin(1)" href="#user" aria-controls="user" role="tab" data-toggle="tab">
            管理员管理
        </div>
        <div class="meun-title">数据管理</div>
        <div class="meun-item" ng-click="getVideo(1)" href="#scho" aria-controls="scho" role="tab" data-toggle="tab" >
            视频管理
        </div>
        <div class="meun-title"data-toggle="collapse" style=" cursor:pointer" data-parent="#accordion" href="#collapseAccount" aria-expanded="true" aria-controls="collapseOne">
            <span onClick="changeB()" id="topB" class="glyphicon glyphicon-triangle-bottom"></span> <span>评论管理</span>
        </div>
            <div id="collapseAccount" class="collapse in" aria-expanded="true">
                <div class="meun-item" ng-click="getComment(1)" href="#regu" aria-controls="regu" role="tab" data-toggle="tab">一级评论管理</div>
                <div class="meun-item" ng-click="getCommentErji(1)" href="#erjipl" aria-controls="regu" role="tab" data-toggle="tab">二级评论管理</div>
                <div class="meun-item" ng-click="getCommentShanji(1)" href="#snajipl" aria-controls="regu" role="tab" data-toggle="tab">三级评论管理</div>
            </div>
        <div class="meun-item" ng-click="getUserAll(1)" href="#stud" aria-controls="stud" role="tab" data-toggle="tab">
            人员信息
        </div>
    </div>
    <!-- 右侧具体内容栏目 -->
    <div id="rightContent">
        <a class="toggle-btn" id="nimei">
            <i class="glyphicon glyphicon-align-justify"></i>
        </a>
        <!-- Tab panes -->
        <div class="tab-content">
            <!-- 权限管理模块 -->
            <div role="tabpanel" class="tab-pane active" id="sour">
                后台管理
            </div>

            <!--用户管理模块-->
            <div role="tabpanel" class="tab-pane" id="user">
                <div class="check-div form-inline">
                    <div class="col-xs-3">
                        <button class="btn btn-yellow btn-xs" data-toggle="modal" data-target="#addAdmin">添加管理员账号</button>
                    </div>
                    <div class="col-xs-4">
                        <input type="text" class="form-control input-sm" placeholder="输入文字搜索">
                        <button class="btn btn-white btn-xs ">查 询</button>
                    </div>
                </div>
                <div class="data-div">
                    <div class="row tableHeader">
                        <div class="col-xs-2 ">
                            用户名
                        </div>
                        <div class="col-xs-2">
                            创建时间
                        </div>
                        <div class="col-xs-2">
                            权限
                        </div>
                        <div class="col-xs-2">
                            密码
                        </div>
                        <div class="col-xs-2">
                            状态
                        </div>
                        <div class="col-xs-2">
                            操作
                        </div>
                    </div>
                    <div class="tablebody" ng-repeat="adminuser in admin">

                        <div class="row">
                            <div class="col-xs-2 ">
                                {{adminuser.username}}
                            </div>
                            <div class="col-xs-2">
                                {{adminuser.regtime}}
                            </div>
                            <div class="col-xs-2">
                                <span ng-if="adminuser.power=='1'"><span>管理员账号</span></span>
                                <span ng-if="adminuser.power=='2'"><span>普通用户</span></span>
                            </div>
                            <div class="col-xs-2">
                                {{adminuser.password}}
                            </div>
                            <div class="col-xs-2">
                                <span ng-if="adminuser.state=='1'"><span>有效</span></span>
                                <span ng-if="adminuser.state=='0'"><span>无效</span></span>
                            </div>
                            <div class="col-xs-2">
                                <button class="btn btn-success btn-xs" data-toggle="modal" data-target="#reviseUser{{adminuser.id}}">
                                    修改
                                </button>
                                <button class="btn btn-danger btn-xs" data-toggle="modal"
                                        data-target="#deleteAdminUser{{adminuser.id}}">删除
                                </button>
                            </div>
                        </div>

                        <!--弹出删除用户警告窗口-->
                        <div class="modal fade" id="deleteAdminUser{{adminuser.id}}" role="dialog"
                             aria-labelledby="gridSystemModalLabel"  ng-repeat="adminuser in admin">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal"
                                                aria-label="Close"><span
                                                aria-hidden="true">&times;</span></button>
                                        <h4 class="modal-title" id="gridSystemModalLabel1">提示</h4>
                                    </div>
                                    <div class="modal-body">
                                        <div class="container-fluid">
                                            确定要删除该用户？删除后不可恢复！{{adminuser.id}}
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-xs btn-white" data-dismiss="modal">取 消
                                        </button>
                                        <button type="button" class="btn  btn-xs btn-danger"
                                                ng-click="deleteUser(adminuser.id)">确 定
                                        </button>
                                    </div>
                                </div>
                                <!-- /.modal-content -->
                            </div>
                            <!-- /.modal-dialog -->
                        </div>
                        <!-- /.modal -->
                    </div>

                </div>
                <!--页码块-->
                <footer class="footer">
                    <ul class="pagination">
                        <li class="gray">
                            共{{adminpage.pages}}页
                        </li>
                        <li ng-if="adminpage.hasPreviousPage">
                            <button class="btn btn-success btn-xs" ng-click="getUserAll(adminpage.pgeNum-1)">
                                上一页
                            </button>
                        </li>
                        <li ng-if="adminpage.hasNextPage">
                            <button class="btn btn-success btn-xs" ng-click="getUserAll(adminpage.nextPage)">
                                下一页
                            </button>
                        </li>
                    </ul>
                </footer>
                <!--修改管理员信息-->
                <div class="modal fade" id="reviseUser{{adminuser.id}}" role="dialog" aria-labelledby="gridSystemModalLabel" ng-repeat="adminuser in admin">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                        aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="edituser2">修改管理员信息</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    <form class="form-horizontal">
                                        <div class="form-group ">
                                            <label for="xgyhm" class="col-xs-3 control-label">用户名：</label>
                                            <div id="xgyhm" class="col-xs-8 ">
                                                <input type="text" id="username" class="form-control input-sm duiqi"
                                                       placeholder="" value="{{adminuser.username}}">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="power1" class="col-xs-3 control-label">密码：</label>
                                            <div class="col-xs-8" id="power1">
                                                <input type="text" class="form-control input-sm duiqi" id="password"
                                                       placeholder="" value="{{adminuser.password}}">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="xgyhzt" class="col-xs-3 control-label">状态：</label>
                                            <div id="xgyhzt" class="col-xs-8">
                                                <label class="control-label" for="normal2">
                                                    <input type="radio" name="situation" value="1" id="normal2">正常</label> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                <label class="control-label" for="forbid2">
                                                    <input type="radio" name="situation" value="0" id="forbid2"> 禁用</label>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" id="qxxiugai" class="btn btn-xs btn-white" data-dismiss="modal">取 消</button>
                                <button type="button" ng-click="updateAdmin(adminuser.id)" class="btn btn-xs btn-green">保 存</button>
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
                <!-- /.modal -->
                <!--添加管理账号弹窗-->
                <div class="modal fade" id="addAdmin" role="dialog" aria-labelledby="gridSystemModalLabel" >
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                        aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="tjyh">添加管理账号</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    <form class="form-horizontal">
                                        <div class="form-group ">
                                            <label for="glymc" class="col-xs-3 control-label">用户名：</label>
                                            <div class="col-xs-8 ">
                                                <input id="glymc" type="text" class="form-control input-sm duiqi"
                                                       placeholder="">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="glymm" class="col-xs-3 control-label">密码：</label>
                                            <input id="glymm" type="text" class="form-control input-sm duiqi"
                                                   placeholder="" value="">
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-xs btn-white" data-dismiss="modal">取 消</button>
                                <button type="button" class="btn btn-xs btn-green" ng-click="addAdmin()">保 存</button>
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
                <!-- /.modal -->

            </div>
            <!--视频管理模块-->
            <div role="tabpanel" class="tab-pane" id="scho">

                <div class="check-div form-inline">
                    <div class="col-xs-3">
                        <button class="btn btn-yellow btn-xs" data-toggle="modal" data-target="#addSchool">添加地区</button>
                    </div>
                    <div class="col-lg-4 col-xs-5">
                        <input type="text" class=" form-control input-sm " placeholder="输入文字搜索">
                        <button class="btn btn-white btn-xs ">查 询</button>
                    </div>
                    <div class="col-lg-3 col-lg-offset-1 col-xs-3"
                         style="padding-right: 40px;text-align: right;float: right;">
                        <label for="paixu">排序:&nbsp;</label>
                        <select id="paixu" class="form-control">
                            <option>地区</option>
                            <option>排名</option>
                        </select>
                    </div>
                </div>
                <div class="data-div">
                    <div class="row tableHeader">
                        <div class="col-xs-3 ">
                            ID
                        </div>
                        <div class="col-xs-2 ">
                            标题
                        </div>
                        <div class="col-xs-2">
                            上传人
                        </div>
                        <div class="col-xs-1">
                            上传时间
                        </div>
                        <div class="col-xs-1">
                            审核状态
                        </div>
                        <div class="col-xs-1">
                            操作
                        </div>
                    </div>
                    <div class="tablebody" ng-repeat="videoinfo in video">
                        <div class="row" style="font-size: 7px">
                            <div class="col-xs-3 " style="font-size: 7px">
                                {{videoinfo.vid}}
                            </div>
                            <div class="col-xs-2 " style="font-size: 10px;color: greenyellow">
                                {{videoinfo.vtitle}}
                            </div>
                            <div class="col-xs-2">
                                {{videoinfo.scrname}}
                            </div>
                            <div class="col-xs-1">
                                {{videoinfo.uptime}}
                            </div>
                            <div class="col-xs-1">
                                <span ng-if="videoinfo.state=='1'"><span>审核通过</span></span>
                                <span ng-if="videoinfo.state=='2'"><span>不予通过</span></span>
                                <span ng-if="videoinfo.state=='0'"><span>待审核</span></span>
                            </div>
                            <div class="col-xs-1">
                                <button class="btn btn-danger btn-xs" ng-click="shenhe(videoinfo.vid)" data-toggle="modal" data-target="#shenhe{{videoinfo.vid}}">
                                    修改审核状态
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal fade" id="shenhe{{videoinfo.vid}}" role="dialog" aria-labelledby="gridSystemModalLabel" ng-repeat="videoinfo in video">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal"
                                        aria-label="Close"><span
                                        aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="shsp">审核视频</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    <form  class="form-horizontal" ng-submit="editState(videoinfo.vid)">
                                        <input type="hidden" id="editvid{{videoinfo.vid}}" ng-model="edit.vid" ng-value="videoinfo.vid">
                                        <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">视频：</label>
                                            <div class="col-xs-6 ">
                                                <video id="myvideo{{videoinfo.vid}}" src="" style="width: 300px;height: 200px" controls="controls">
                                                    your browser does not support the video tag
                                                </video>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="jianjie" class="col-xs-3 control-label">简介：</label>
                                            <div id="jianjie" class="col-xs-6 ">
                                                <textarea readonly style="font-size: 10px;width: 300px;height: 100px">{{videoinfo.descript}}</textarea>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="shenhexx" class="col-xs-3 control-label">审核选项：</label>
                                            <div id="shenhexx" class="col-xs-6">
                                                <input type="radio" name="sh{{video.vid}}" ng-model="sh" ng-value="1">通过
                                                <input type="radio" name="sh{{video.vid}}" ng-model="sh" ng-value="2">不予通过
                                            </div>
                                        </div>
                                        <div ng-switch="sh">
                                            <div class="form-group" id="shly" ng-switch-when="2">
                                                <label for="sOrd" class="col-xs-3 control-label">不通过理由：</label>
                                                <div class="col-xs-6">
                                                    <input type="checkbox" name="btgyy{{video.vid}}" value="1">
                                                    <input type="checkbox" name="btgyy{{video.vid}}" value="2">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" id="btqx{{videoinfo.vid}}" class="btn btn-xs btn-white" data-dismiss="modal">取 消
                                            </button>
                                            <button type="submit" class="btn btn-xs btn-green">保 存</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>

                <!--页码块-->
                <footer class="footer">
                    <ul class="pagination">
                        <li class="gray">
                            共{{pageVideo.pages}}页
                        </li>
                        <li ng-if="pageVideo.hasPreviousPage">
                            <button class="btn btn-success btn-xs" ng-click="getUserAll(pageVideo.pgeNum-1)">
                                上一页
                            </button>
                        </li>
                        <li ng-if="pageVideo.hasNextPage">
                            <button class="btn btn-success btn-xs" ng-click="getUserAll(pageVideo.nextPage)">
                                下一页
                            </button>
                        </li>
                    </ul>
                </footer>


            </div>
            <!--一级评论管理-->
            <div role="tabpanel" class="tab-pane" id="regu">
                <div class="check-div form-inline">
                    <div class="col-xs-5">
                        <input type="text" class=" form-control input-sm" placeholder="输入文字搜索"
                               style="	!height: 40px!important;">
                        <button class="btn btn-white btn-xs ">查 询</button>
                    </div>


                </div>
                <div class="data-div">
                    <div class="row tableHeader">
                        <div class="col-xs-3 ">
                            评论ID
                        </div>
                        <div class="col-xs-2 ">
                            回复人
                        </div>
                        <div class="col-xs-2 ">
                            回复时间
                        </div>
                        <div class="col-xs-2">
                           评论内容
                        </div>

                        <div class="col-xs-1">
                            操作
                        </div>
                    </div>
                    <div class="tablebody">

                        <div class="row" ng-repeat="commentSaying in plnr">
                            <div class="col-xs-3 " style="font-size: 7px;">
                                {{commentSaying.id}}
                            </div>
                            <div class="col-xs-2" style="font-size: 7px;">
                                {{commentSaying.author}}
                            </div>
                            <div class="col-xs-2" style="font-size: 7px">
                                {{commentSaying.createTime}}
                            </div>
                            <div class="col-xs-2" style="height: 70px;">
                                <textarea name="" readonly style="height: 70px;width: 170px;font-size: 7px">{{commentSaying.sayingContent}}</textarea>
                            </div>

                            <div class="col-xs-1">
                                <button class="btn btn-danger btn-xs" data-toggle="modal"
                                        data-target="#deletePL{{commentSaying.id}}">删除
                                </button>
                            </div>

                        </div>
                        <!--弹出删除违约记录警告窗口-->
                        <!-- /.modal -->
                    </div>

                </div>

                <div class="modal fade" id="deletePL{{commentSaying.id}}" role="dialog"
                     aria-labelledby="gridSystemModalLabel" ng-repeat="commentSaying in plnr">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal"
                                        aria-label="Close"><span
                                        aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="tspl">提示</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    确定要删除该评论及该评论下的所有回复？删除后不可恢复！
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-xs btn-white"
                                        data-dismiss="modal">取 消
                                </button>
                                <button type="button" class="btn btn-xs btn-danger"
                                        ng-click="deletePL(commentSaying.id)">确 定
                                </button>
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
                <!--<div class="modal fade" id="jipl{{commentSaying.id}}" role="dialog"
                     aria-labelledby="gridSystemModalLabel" ng-repeat="commentSaying in plnr" style="width: 1150px;">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal"
                                        aria-label="Close"><span
                                        aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="tsp2">提示</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    确定要删除该评论？删除后不可恢复！
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-xs btn-white"
                                        data-dismiss="modal">取 消
                                </button>
                                <button type="button" class="btn btn-xs btn-danger"
                                        ng-click="deletePL(commentSaying.id)">确 定
                                </button>
                            </div>
                        </div>
                        &lt;!&ndash; /.modal-content &ndash;&gt;
                    </div>
                    &lt;!&ndash; /.modal-dialog &ndash;&gt;
                </div>-->
                <!--页码块-->
                <footer class="footer">
                    <ul class="pagination">
                        <li class="gray">
                            共{{pageComment.pages}}页
                        </li>
                        <li ng-if="pageComment.hasPreviousPage">
                            <button class="btn btn-success btn-xs"
                                    ng-click="getComment(pageComment.pgeNum-1)">
                                上一页
                            </button>
                        </li>
                        <li ng-if="pageComment.hasNextPage">
                            <button class="btn btn-success btn-xs"
                                    ng-click="getComment(pageComment.nextPage)">
                                下一页
                            </button>
                        </li>
                    </ul>
                </footer>


            </div>

            <!--二级评论管理-->
            <div role="tabpanel" class="tab-pane" id="erjipl">
                <div class="check-div form-inline">
                    <div class="col-xs-5">
                        <input type="text" class=" form-control input-sm" placeholder="输入文字搜索"
                               style="	!height: 40px!important;">
                        <button class="btn btn-white btn-xs ">查 询</button>
                    </div>


                </div>
                <div class="data-div">
                    <div class="row tableHeader">
                        <div class="col-xs-3 ">
                            评论ID
                        </div>
                        <div class="col-xs-1 ">
                            回复人
                        </div>
                        <div class="col-xs-3 ">
                            被回复评论id
                        </div>
                        <div class="col-xs-2">
                            评论内容
                        </div>
                        <div class="col-xs-2">
                            回复时间
                        </div>

                        <div class="col-xs-1">
                            操作
                        </div>
                    </div>
                    <div class="tablebody">

                        <div class="row" ng-repeat="commentFirstLevel in plnrej">
                            <div class="col-xs-3 " style="font-size: 7px;">
                                {{commentFirstLevel.id}}
                            </div>
                            <div class="col-xs-1" style="font-size: 7px;">
                                {{commentFirstLevel.commenter}}
                            </div>

                            <div class="col-xs-3" style="font-size: 7px">
                                {{commentFirstLevel.sayingId}}
                            </div>
                            <div class="col-xs-2" style="height: 70px;">
                                <textarea name="" readonly style="height: 70px;width: 170px;font-size: 7px">{{commentFirstLevel.commentContent}}</textarea>
                            </div>

                            <div class="col-xs-2" style="font-size: 7px">
                                {{commentFirstLevel.commentTime}}
                            </div>
                            <div class="col-xs-1">
                                <button class="btn btn-danger btn-xs" data-toggle="modal"
                                        data-target="#deleteEjPL{{commentFirstLevel.id}}">删除
                                </button>
                            </div>

                        </div>
                        <!--弹出删除违约记录警告窗口-->
                        <!-- /.modal -->
                    </div>

                </div>

                <div class="modal fade" id="deleteEjPL{{commentFirstLevel.id}}" role="dialog"
                     aria-labelledby="gridSystemModalLabel" ng-repeat="commentFirstLevel in plnrej">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal"
                                        aria-label="Close"><span
                                        aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="ts2">提示</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    确定要删除该评论？删除后不可恢复！
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-xs btn-white"
                                        data-dismiss="modal">取 消
                                </button>
                                <button type="button" class="btn btn-xs btn-danger"
                                        ng-click="deleteEjPL(commentFirstLevel.id)">确 定
                                </button>
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
                <!--<div class="modal fade" id="jipl{{commentSaying.id}}" role="dialog"
                     aria-labelledby="gridSystemModalLabel" ng-repeat="commentSaying in plnr" style="width: 1150px;">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal"
                                        aria-label="Close"><span
                                        aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="tsp2">提示</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    确定要删除该评论？删除后不可恢复！
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-xs btn-white"
                                        data-dismiss="modal">取 消
                                </button>
                                <button type="button" class="btn btn-xs btn-danger"
                                        ng-click="deletePL(commentSaying.id)">确 定
                                </button>
                            </div>
                        </div>
                        &lt;!&ndash; /.modal-content &ndash;&gt;
                    </div>
                    &lt;!&ndash; /.modal-dialog &ndash;&gt;
                </div>-->
                <!--页码块-->
                <footer class="footer">
                    <ul class="pagination">
                        <li class="gray">
                            共{{pageejComment.pages}}页
                        </li>
                        <li ng-if="pageejComment.hasPreviousPage">
                            <button class="btn btn-success btn-xs"
                                    ng-click="getCommentErji(pageejComment.pgeNum-1)">
                                上一页
                            </button>
                        </li>
                        <li ng-if="pageejComment.hasNextPage">
                            <button class="btn btn-success btn-xs"
                                    ng-click="getCommentErji(pageejComment.nextPage)">
                                下一页
                            </button>
                        </li>
                    </ul>
                </footer>


            </div>

            <!--三级评论管理-->
            <div role="tabpanel" class="tab-pane" id="snajipl">
                <div class="check-div form-inline">
                    <div class="col-xs-5">
                        <input type="text" class=" form-control input-sm" placeholder="输入文字搜索"
                               style="	!height: 40px!important;">
                        <button class="btn btn-white btn-xs ">查 询</button>
                    </div>


                </div>
                <div class="data-div">
                    <div class="row tableHeader">
                        <div class="col-xs-2 ">
                            回复人
                        </div>
                        <div class="col-xs-3 ">
                            被回复评论id
                        </div>
                        <div class="col-xs-3">
                            回复内容
                        </div>
                        <div class="col-xs-2">
                            被回复人
                        </div>

                        <div class="col-xs-1">
                            操作
                        </div>
                    </div>
                    <div class="tablebody">

                        <div class="row" ng-repeat="commentSecondLevel in plnrsj">
                            <div class="col-xs-2" style="font-size: 7px;">
                                {{commentSecondLevel.replier}}
                            </div>

                            <div class="col-xs-3" style="font-size: 7px">
                                {{commentSecondLevel.flcId}}
                            </div>
                            <div class="col-xs-3" style="height: 70px;">
                                <textarea name="" readonly style="height: 70px;width: 170px;font-size: 7px">{{commentSecondLevel.replyContent}}</textarea>
                            </div>

                            <div class="col-xs-2" style="font-size: 7px">
                                {{commentSecondLevel.toCommenter}}
                            </div>
                            <div class="col-xs-1">
                                <button class="btn btn-danger btn-xs" data-toggle="modal"
                                        data-target="#deletesjPL{{commentSecondLevel.id}}">删除
                                </button>
                            </div>

                        </div>
                        <!--弹出删除违约记录警告窗口-->
                        <!-- /.modal -->
                    </div>

                </div>

                <div class="modal fade" id="deletesjPL{{commentSecondLevel.id}}" role="dialog"
                     aria-labelledby="gridSystemModalLabel" ng-repeat="commentSecondLevel in plnrsj">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal"
                                        aria-label="Close"><span
                                        aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="ts3">提示</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    确定要删除该评论？删除后不可恢复！
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-xs btn-white"
                                        data-dismiss="modal">取 消
                                </button>
                                <button type="button" class="btn btn-xs btn-danger"
                                        ng-click="deleteEjPL(commentSecondLevel.id)">确 定
                                </button>
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
                <!--页码块-->
                <footer class="footer">
                    <ul class="pagination">
                        <li class="gray">
                            共{{pagesjComment.pages}}页
                        </li>
                        <li ng-if="pagesjComment.hasPreviousPage">
                            <button class="btn btn-success btn-xs"
                                    ng-click="getCommentErji(pagesjComment.pgeNum-1)">
                                上一页
                            </button>
                        </li>
                        <li ng-if="pageejComment.hasNextPage">
                            <button class="btn btn-success btn-xs"
                                    ng-click="getCommentShanji(pagesjComment.nextPage)">
                                下一页
                            </button>
                        </li>
                    </ul>
                </footer>


            </div>

            <!--人员管理模块-->
            <div role="tabpanel" class="tab-pane" id="stud">
                <div class="check-div form-inline">
                    <div class="col-xs-5">
                        <input type="text" class=" form-control input-sm" placeholder="输入文字搜索"
                               style="	!height: 40px!important;">
                        <button class="btn btn-white btn-xs ">查 询</button>
                    </div>


                </div>
                <div class="data-div">
                    <div class="row tableHeader">
                        <div class="col-xs-3 ">
                            ID
                        </div>
                        <div class="col-xs-3 ">
                            用户名
                        </div>
                        <div class="col-xs-2">
                            权限
                        </div>
                        <div class="col-xs-1 ">
                            性别
                        </div>
                        <div class="col-xs-1">
                            状态
                        </div>
                        <div class="col-xs-1">
                            操作
                        </div>
                    </div>
                    <div class="tablebody" ng-repeat="user in ptuser">

                        <div class="row">
                            <div class="col-xs-3 " style="font-size: 10px;">
                                {{user.id}}
                            </div>
                            <div class="col-xs-3">
                                {{user.username}}
                            </div>
                            <div class="col-xs-2">
                                <span ng-if="user.power=='1'"><span>管理员账号</span></span>
                                <span ng-if="user.power=='2'"><span>普通用户</span></span>
                            </div>
                            <div class="col-xs-1">
                                <span ng-if="user.sex=='1'"><span>男</span></span>
                                <span ng-if="user.sex=='2'"><span>女</span></span>
                            </div>
                            <div class="col-xs-1">
                                <span ng-if="user.state=='1'"><span>有效</span></span>
                                <span ng-if="user.state=='0'"><span>无效</span></span>
                            </div>

                            <div class="col-xs-2">
                                <button class="btn btn-success btn-xs" data-toggle="modal"
                                        data-target="#editUserState{{user.id}}">
                                    修改
                                </button>
                                <button class="btn btn-danger btn-xs" data-toggle="modal"
                                        data-target="#deleteObey{{user.id}}">删除
                                </button>
                            </div>
                        </div>
                        <!--弹出删除违约记录警告窗口-->
                        <!-- /.modal -->
                    </div>

                </div>

                <!--修改管理员信息-->
                <div class="modal fade" id="editUserState{{user.id}}" role="dialog" aria-labelledby="gridSystemModalLabel" ng-repeat="user in ptuser">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                        aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" >修改用户状态</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    <form class="form-horizontal">
                                        <div class="form-group ">
                                            <label for="xgyhm" class="col-xs-3 control-label">用户名：</label>
                                            <div  class="col-xs-8 ">
                                                <input type="hidden" id="ptpassword" value="{{user.password}}">
                                                <input type="text" id="ptusername" readonly class="form-control input-sm duiqi"
                                                       placeholder="" value="{{user.username}}">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="xgyhzt" class="col-xs-3 control-label">状态：</label>
                                            <div id="yhzt" class="col-xs-8">
                                                <label class="control-label" for="normal2">
                                                    <input type="radio" name="userstate" value="1" >正常</label> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                <label class="control-label" for="forbid2">
                                                    <input type="radio" name="userstate" value="0" > 禁用</label>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button"  class="btn btn-xs btn-white" data-dismiss="modal">取 消</button>
                                <button type="button" ng-click="updateUser(user.id)" class="btn btn-xs btn-green">保 存</button>
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>

                <div class="modal fade" id="deleteObey{{user.id}}" role="dialog"
                     aria-labelledby="gridSystemModalLabel" ng-repeat="user in ptuser">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal"
                                        aria-label="Close"><span
                                        aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="ts4">提示</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    确定要删除该用户？删除后不可恢复！
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-xs btn-white"
                                        data-dismiss="modal">取 消
                                </button>
                                <button type="button" class="btn btn-xs btn-danger"
                                        ng-click="deleteUser(user.id)">确 定
                                </button>
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
                <!--页码块-->
                <footer class="footer">
                    <ul class="pagination">
                        <li class="gray">
                            共{{ptuserpage.pages}}页
                        </li>
                        <li ng-if="ptuserpage.hasPreviousPage">
                            <button class="btn btn-success btn-xs"
                                    ng-click="getUserAll(ptuserpage.pgeNum-1)">
                                上一页
                            </button>
                        </li>
                        <li ng-if="ptuserpage.hasNextPage">
                            <button class="btn btn-success btn-xs"
                                    ng-click="getUserAll(ptuserpage.nextPage)">
                                下一页
                            </button>
                        </li>
                    </ul>
                </footer>


            </div>
        </div>
    </div>
</div>

<script src="js/jquery.nouislider.js"></script>

<!-- this page specific inline scripts -->
<script>
    var app = angular.module('app', []);
    baseUrl = "";
    app.controller('mainController', ['$scope', 'httpService', function ($scope,httpService) {

        $scope.cmt = {
            fstlvlcmt: ""
        }

        $scope.videoUrlFun = function(url){
            var urlFun = $sce.trustAsResourceUrl(url);
            return urlFun;
        };

        /*管理员查询*/
        $scope.getAdmin = function (pageNums) {
            httpService.get("/houtai/getAdmin/" + pageNums + "/10", {}, function (data) {
                $scope.adminpage = data;
                $scope.adminnavigatepageNum = data.navigatepageNums;
                $scope.admin = data.list;
                console.log(data);
                for (var index = 0; index < data.length; index++) {
                    $scope.admin[index] = data.list[index];
                }
            }, function (error) {
                console.log(error)
            });
        }

        /*用户查询*/
        $scope.getUserAll = function (pageNums) {
            httpService.get("/houtai/getAllUser/" + pageNums + "/6", {}, function (data) {
                $scope.ptuserpage = data;
                $scope.ptusernavigatepageNum = data.navigatepageNums;
                $scope.ptuser = data.list;
                console.log(data);
                for (var index = 0; index < data.length; index++) {
                    $scope.ptuser[index] = data.list[index];
                }
            }, function (error) {
                console.log(error)
            });
        }

        /*视频查询*/
        $scope.getVideo = function (pageNums) {
            httpService.get("/houtai/getAllVideo/" + pageNums + "/6", {}, function (data) {
                $scope.pageVideo = data;
                $scope.pageVideoNums = data.navigatepageNums;
                $scope.video = data.list;
                console.log(data);
                for (var index = 0; index < $scope.video.length; index++) {
                    $("#myvideo").attr("src","/static/"+$scope.video[index].vsrc);
                }
            }, function (error) {
                console.log(error)
            });
        }

        /*审核*/
        $scope.shenhe =function(vid){
            for (var index = 0; index < $scope.video.length; index++) {
                if ($scope.video[index].vid==vid) {
                    $("#myvideo"+$scope.video[index].vid).attr("src", "/static/" + $scope.video[index].vsrc);
                    alert("/static/" + $scope.video[index].vsrc)
                }
            }
        }
        /*删除*/
        $scope.deleteUser = function (userid) {
            var url = baseUrl + "/houtai/deleteUser/" + userid;
            $("#deleteAdminUser"+userid).modal("hide");
            $("#deleteObey"+userid).modal("hide");
            httpService.get(url, {}, function () {
               $scope.getUserAll(1);
               $scope.getAdmin(1);
            }, function (error) {
                console.log(error)
            });
        }

        /*更新审核状态*/
        $scope.editState = function (vid) {
            var btglys = $("input[name*='btgyy']:checked").map(function (index, elem) {
                return $(elem).val();
            }).get().join(',');
            console.log(btglys);
            for (var index = 0; index < $scope.video.length; index++) {
                if ($scope.video[index].vid == vid) {
                    $scope.edit = {
                        state: $("input[name*='sh']:checked").val(),
                        vid: vid,
                        btgyy: btglys
                    }
                }
            }
            console.log($scope.edit);
            $("#btqx"+vid).trigger("click");
            httpService.post("/houtai/editVideoState",$scope.edit,function (data) {
                $scope.getVideo(1);
            },function (error) {
                alert(error);
            });
        }

        /*修改管理员*/
        $scope.updateAdmin =function (userid) {
            var state=$("input[name='situation']:checked").val();
            var username=$("#username").val();
            var password=$("#password").val();
            $scope.editadmin={
                id:userid,
                state:state,
                username:username,
                password:password
            }
            console.log($scope.editadmin);
            $("#reviseUser"+userid).modal("hide");
            httpService.post("/houtai/editAdmin/",$scope.editadmin,function (data) {
                $scope.getAdmin(1);
            })

        }

        /*修改用户状态*/
        $scope.updateUser =function (userid) {
            var state=$("input[name='userstate']:checked").val();
            $scope.editadmin={
                id:userid,
                password:$("#ptpassword").val(),
                username:$("#ptusername").val(),
                state:state,
            }
            console.log($scope.editadmin);
            $("#editUserState"+userid).modal("hide");
            httpService.post("/houtai/editAdmin/",$scope.editadmin,function (data) {
                $scope.getUserAll(1);
            })

        }

        /*修改管理员*/
        $scope.addAdmin =function () {
            var state='1';
            var username=$("#glymc").val();
            var password=$("#glymm").val();
            $scope.addadmin={
                state:state,
                username:username,
                password:password,
                power:"1"
            }
            console.log($scope.addadmin);
            $("#addAdmin").modal("hide");
            httpService.post("/houtai/addAdmin/",$scope.addadmin,function (data) {
                $scope.getAdmin(1);
            });

        }

        /*查看评论*/
        $scope.getComment = function (pageNums) {
            httpService.get("/houtai/getComment/" + pageNums + "/5", {}, function (data) {
                $scope.pageComment = data;
                $scope.pageCommentNums = data.navigatepageNums;
                $scope.plnr = data.list;
                console.log(data);
                console.log(data.list);
            }, function (error) {
                console.log(error)
            });
        }

        /*删除评论*/
        $scope.deleteEjPL=function(plid){
            var url = baseUrl + "/houtai/delPl/" + plid;
            $("#deleteEjPL"+plid).modal("hide");
            $("#deletesjPL"+plid).modal("hide");
            httpService.get(url, {}, function () {
                $scope.getCommentErji(1);
                $scope.getCommentShanji(1);
            }, function (error) {
                console.log(error)
            });
        }

        /*级联删除评论*/
        $scope.deletePL=function(plid){
            var url = baseUrl + "/houtai/delPls/" + plid;
            $("#deletePL"+plid).modal("hide");
            httpService.get(url, {}, function () {
                $scope.getComment(1);
            }, function (error) {
                console.log(error)
            });
        }

        /*查看二级评论*/
        $scope.getCommentErji = function (pageNums) {
            httpService.get("/houtai/getCommentErji/" + pageNums + "/5", {}, function (data) {
                $scope.pageejComment = data;
                $scope.pageejCommentNums = data.navigatepageNums;
                $scope.plnrej = data.list;
                console.log(data);
                console.log(data.list);
            }, function (error) {
                console.log(error)
            });
        }

        /*查看三级级评论*/
        $scope.getCommentShanji = function (pageNums) {
            httpService.get("/houtai/getCommentShanji/" + pageNums + "/5", {}, function (data) {
                $scope.pagesjComment = data;
                $scope.pagejCommentNums = data.navigatepageNums;
                $scope.plnrsj = data.list;
                console.log(data);
                console.log(data.list);
            }, function (error) {
                console.log(error)
            });
        }
        /*httpService.get("/video/getZr/", {}, function (data) {
            $scope.zrdata = data;
            console.log(data);
            for (let index = 0; index < data.length; index++) {
                $scope.zrdata[index] = data[index];
            }
        }, function (error) {
            console.log(error)
        });*/

    }]);

    app.factory('httpService', ['$http', function ($http) {
        return {
            get: function (url, params, successCallback, errorCallback) {
                $http({
                    url: url + "?" + $.param(params),
                    method: 'get',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    responseType: 'json'
                })
                    .success(successCallback)
                    .error(errorCallback);
            },
            post: function (url, params, successCallback, errorCallback) {
                $http({
                    url: url,
                    method: 'post',
                    data: $.param(params),
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    responseType: 'json'
                })
                    .success(successCallback)
                    .error(errorCallback);
            }
        }
    }]);

    Array.prototype.contains = function (obj) {
        var i = this.length;

        while (i--) {
            if (this[i] === obj) {
                return true;
            }
        }
        return false;
    }


</script>

<center>
    <script type="text/javascript"> (function () {
        var s = "_" + Math.random().toString(36).slice(2);
        document.write('<div style="" id="' + s + '"></div>');
        (window.slotbydup = window.slotbydup || []).push({id: "u4923786", container: s});
    })(); </script>

</center>

</body>

</html>